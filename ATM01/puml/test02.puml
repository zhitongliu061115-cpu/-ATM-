@startuml
!theme plain
skinparam usecase {
  BackgroundColor<<main>> #D5E8D4
  BackgroundColor<<extension>> #FFF2CC
  BackgroundColor<<system>> #FFE6CC
  BorderColor #82B366
  BorderThickness 1
}
skinparam actor {
  BackgroundColor #DAE8FC
  BorderColor #5A6B82
  BorderThickness 2
}

left to right direction

actor ":银行客户" as ActorCustomer <<actor>>
actor ":银行管理员" as ActorAdmin <<actor>>

rectangle "银行客户ATM操作" {
  (用户登录) as UC1 <<main>>
  (输入账户凭证) as UC1_1 <<main>>
  (输入图形验证码) as UC1_2 <<main>>
  (用户注册) as UC2 <<main>>
  (填写注册信息) as UC2_1 <<main>>
  (进行邮箱验证) as UC2_2 <<main>>
  (发送注册成功邮件) as UC2_3 <<extension>>
  (查询余额) as UC3 <<main>>
  (存款) as UC4 <<main>>
  (打印存款凭条) as UC4_1 <<extension>>
  (取款) as UC5 <<main>>
  (打印取款凭条) as UC5_1 <<extension>>
  (转账) as UC6 <<main>>
  (生成转账二维码凭证) as UC6_1 <<extension>>
  (打印转账凭条) as UC6_2 <<extension>>
  (修改密码) as UC7 <<main>>
  (发送密码修改邮件) as UC7_1 <<extension>>
  (退出系统) as UC8 <<main>>

  UC1 --> UC1_1 : include
  UC1 --> UC1_2 : include
  UC2 --> UC2_1 : include
  UC2 --> UC2_2 : include
  UC2 ..> UC2_3 : extend
  UC4 ..> UC4_1 : extend
  UC5 ..> UC5_1 : extend
  UC6 ..> UC6_1 : extend
  UC6 ..> UC6_2 : extend
  UC7 ..> UC7_1 : extend
}

rectangle "银行管理员后台操作" {
  (添加账户) as UC9 <<main>>
  (发送开户成功邮件) as UC9_1 <<extension>>
  (修改账户余额) as UC10 <<main>>
  (重置用户密码) as UC11 <<main>>
  (发送密码重置邮件) as UC11_1 <<extension>>
  (查询账户信息) as UC12 <<main>>
  (查看所有账户) as UC13 <<main>>
  (删除账户) as UC14 <<main>>
  (监控客户端连接) as UC15 <<main>>
  (查看在线用户列表) as UC15_1 <<main>>
  (查看系统日志) as UC16 <<main>>
  (查看数据统计) as UC17 <<main>>
  (查看账户余额分布图) as UC17_1 <<main>>
  (查看各账户余额统计图) as UC17_2 <<main>>
  (查看余额区间占比图) as UC17_3 <<main>>
  (查看系统总览数据) as UC17_4 <<main>>

  UC9 ..> UC9_1 : extend
  UC11 ..> UC11_1 : extend
  UC15 --> UC15_1 : include
  UC17 --> UC17_1 : include
  UC17 --> UC17_2 : include
  UC17 --> UC17_3 : include
  UC17 --> UC17_4 : include
}

' 参与者连接
ActorCustomer --> UC1
ActorCustomer --> UC2
ActorCustomer --> UC3
ActorCustomer --> UC4
ActorCustomer --> UC5
ActorCustomer --> UC6
ActorCustomer --> UC7
ActorCustomer --> UC8
ActorAdmin --> UC9
ActorAdmin --> UC10
ActorAdmin --> UC11
ActorAdmin --> UC12
ActorAdmin --> UC13
ActorAdmin --> UC14
ActorAdmin --> UC15
ActorAdmin --> UC16
ActorAdmin --> UC17


@enduml